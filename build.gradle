allprojects {
    ext {
        appVersion = '0.3'
        appGroup = 'nl.mplatvoet.kotlin.komponents.promises'
    }
}
buildscript {
    repositories { mavenCentral() }
    dependencies {
        classpath 'org.jetbrains.kotlin:kotlin-gradle-plugin:0.10.4'
    }
}
repositories { mavenCentral() }

apply plugin: 'kotlin'

compileJava {
    options.compilerArgs << '-XDignore.symbol.file'
    options.fork = true
    options.forkOptions.executable = 'javac'
}

dependencies {
    compile 'org.jetbrains.kotlin:kotlin-stdlib:0.10.4'
}

task release() {
    dependsOn jar
}

gradle.taskGraph.whenReady {
    allprojects*.version = it.hasTask(release) ? appVersion : appVersion + '-SNAPSHOT'
    allprojects*.group = appGroup
}

defaultTasks 'clean', 'release'


